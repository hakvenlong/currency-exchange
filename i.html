<!DOCTYPE html>
<html lang="km">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DPK ប្ដូរប្រាក់</title>

<style>
body{
    font-family: "Courier New", monospace;
    background:#f2f2f2;
    padding:10px;
}
.container{
    max-width:420px;
    margin:auto;
    background:#fff;
    padding:12px;
    border-radius:6px;
    box-shadow:0 2px 6px rgba(0,0,0,.15);
}
h2,h3{text-align:center;margin:5px 0;}
label{margin-top:6px;font-size:13px;}
input,select,button{
    width:100%;
    padding:8px;
    margin-top:4px;
    font-size:14px;
}
button{
    background:#198754;
    color:#fff;
    border:none;
    border-radius:4px;
}
button:hover{background:#157347;}
pre{
    background:#eee;
    padding:10px;
    margin-top:10px;
    font-size:13px;
}
</style>
</head>

<body>
<div class="container">

<h2>DPK ប្ដូរប្រាក់</h2>

   <h3>អត្រាប្ដូរប្រាក់</h3>

<label>USD → KHR</label>
<input id="usd_khr" type="number" value="4000">

<label>USD → THB</label>
<input id="usd_thb" type="number" value="30.80" step="0.01">

<label>KHR → USD</label>
<input id="khr_usd" type="number" value="4021" step="0.00001">

<label>KHR → THB</label>
<input id="khr_thb" type="number" value="130.0" step="0.1">

<label>THB → USD</label>
<input id="thb_usd" type="number" value="32.3" step="0.00001">

<label>THB → KHR</label>
<input id="thb_khr" type="number" value="126.0">

<h3>បញ្ចូលប្រាក់</h3>
<label>ចំនួន</label>
<input id="amount" type="number">

<label>រូបិយប័ណ្ណ</label>
<select id="from">
<option value="USD">USD</option>
<option value="KHR">KHR</option>
<option value="THB">THB</option>
</select>

<button onclick="add()">បញ្ចូល</button>
<button onclick="printReceipt()">បោះពុម្ព</button>

<pre id="display"></pre>
<pre id="receipt"></pre>

</div>

<script>
let list=[];

function rate(id){ return Number(document.getElementById(id).value); }

function add(){
    let amt = Number(amount.value);
    if(amt<=0){ alert("បញ្ចូលចំនួនប្រាក់"); return; }

    let usd=0,khr=0,thb=0;
    let f=from.value;

    if(f==="USD"){
        usd=amt;
        khr=amt*rate("usd_khr");
        thb=amt*rate("usd_thb");
    }
    if(f==="KHR"){
        khr=amt;
        usd=amt/rate("khr_usd");
        thb=amt/rate("khr_thb");
    }
    if(f==="THB"){
        thb=amt;
        usd=amt/rate("thb_usd");
        khr=amt*rate("thb_khr");
    }

    list.push({usd,khr,thb});
    render();
    amount.value="";
}

function render(){
    let t="";
    list.forEach((x,i)=>{
        t+=`#${i+1}\n`;
        t+=`KHR : ${x.khr.toLocaleString()}\n`;
        t+=`USD : ${x.usd.toFixed(2)}\n`;
        t+=`THB : ${x.thb.toFixed(2)}\n\n`;
    });
    display.textContent=t;
}

function printReceipt(){
    if(list.length===0){ alert("គ្មានទិន្នន័យ"); return; }
    let r="     DPK EXCHANGE\n";
    r+="----------------------\n";
    r+=new Date().toLocaleString('km-KH')+"\n";
    r+="----------------------\n";

    list.forEach((x,i)=>{
        r+=`#${i+1}\n`;
        r+=`KHR ${x.khr.toLocaleString()}\n`;
        r+=`USD ${x.usd.toFixed(2)}\n`;
        r+=`THB ${x.thb.toFixed(2)}\n`;
    });

    r+="----------------------\n";
    r+="សូមពិនិត្យមុនចាកចេញ\n";
    receipt.textContent=r;
    window.print();
}
</script>
</body>
</html>
